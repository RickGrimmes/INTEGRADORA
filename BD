CREATE DATABASE 
INTEGRADORA_JOSE_ANGEL;

use INTEGRADORA_JOSE_ANGEL;


CREATE TABLE PERSONA 
(
ID_PER INT PRIMARY KEY,
NOMBRES NCHAR(40),
APELLIDOS NCHAR(40),
TELEFONO INT
);

CREATE TABLE USUARIO
(
ID_US INT PRIMARY KEY,
PERSONA INT ,FOREIGN KEY (PERSONA) REFERENCES PERSONA(ID_PER),
CORREO NVARCHAR(40),
CONTRASEÃ‘A NCHAR,
NIVEL_USUARIO INT
);

CREATE TABLE PLAN
(
ID INT PRIMARY KEY,
DURACION NCHAR(30),
PRECIO DECIMAL(19,4) NULL,
DESCUENTO DECIMAL
);

CREATE table INSCRIPCION_GYM
(
REG_INSC INT PRIMARY KEY,
FECHA_REG DATE,
FECHA_TER DATE,
ID_CLIENTE INT ,FOREIGN KEY (ID_CLIENTE) REFERENCES PERSONA(ID_PER),
ID_EMPLEADO INT ,FOREIGN KEY (ID_EMPLEADO) REFERENCES USUARIO(ID_US),
PIN INT
);


CREATE TABLE CATEGORIAS
(
ID_CAT INT PRIMARY KEY,
NOMBRE NCHAR (40),
DETALLE TEXT
);

CREATE TABLE PRODUCTOS
(
CVE_P INT PRIMARY KEY,
NOMBRE NCHAR(25),
PRECIO_UNITARIO INT,
DESCUENTO DECIMAL,
EXISTENCIA INT,
CATEGORIA INT ,FOREIGN KEY (CATEGORIA) REFERENCES CATEGORIAS(ID_CAT)
);

CREATE TABLE PROVEEDOR
(
ID_PRO INT PRIMARY KEY,
NOMBRE NCHAR (40),
DIRECCION NVARCHAR(50),
CORREO NCHAR(40),
TELEFONO INT
);

CREATE TABLE ORDEN_COMPRA
(
ID_COMPRA INT PRIMARY KEY,
FECHA DATE,
USUARIO INT,
FOREIGN KEY (USUARIO) REFERENCES USUARIO(ID_US),
PROVEEDOR INT, FOREIGN KEY (PROVEEDOR) REFERENCES PROVEEDOR(ID_PRO)
);

CREATE TABLE ORDEN_VENTA
(
CVE INT PRIMARY KEY,
USUARIO INT,
FOREIGN KEY (USUARIO) REFERENCES USUARIO(ID_US),
FECHA_VENTA DATE
);

CREATE TABLE DETALLE_ORDEN_VENTA
(
REG_DOV INT PRIMARY KEY,
ORDEN_VENTA INT,
foreign key (ORDEN_VENTA) references ORDEN_VENTA(CVE),
PRODUCTO INT,
foreign key(PRODUCTO) REFERENCES PRODUCTOS(CVE_P),
CANTIDAD INT
);

CREATE TABLE DETALLE_ORDEN_COMPRA
(
ID_DOC INT PRIMARY KEY,
ORDEN_COMPRA INT,
foreign key (ORDEN_COMPRA) references ORDEN_COMPRA(ID_COMPRA),
PRODUCTO INT,
foreign key(PRODUCTO) REFERENCES PRODUCTOS(CVE_P),
CANTIDAD INT
);
