CREATE DATABASE INTEGRADORA;

USE INTEGRADORA;

CREATE TABLE USUARIO
(
ID_US INT PRIMARY KEY AUTO_INCREMENT,
NOMBRES NVARCHAR(20) NOT NULL,
APELLIDOS NVARCHAR(20) NOT NULL,
DIRECCION NVARCHAR(60) NOT NULL,
TELEFONO NVARCHAR(12) NOT NULL,
CORREO NVARCHAR(40) NOT NULL,
F_NAC DATE NOT NULL,
CP INT NOT NULL,
CONTRASEÃ‘A NVARCHAR (20) NOT NULL,
NIVEL_USUARIO INT NOT NULL
);

CREATE TABLE CATEGORIAS
(
ID_CAT INT PRIMARY KEY AUTO_INCREMENT,
NOMBRE NCHAR (40) NOT NULL,
DETALLE TEXT NOT NULL
);

CREATE TABLE PRODUCTOS
(
CVE_P INT PRIMARY KEY AUTO_INCREMENT,
NOMBRE NCHAR(25) NOT NULL,
PRECIO_UNITARIO DECIMAL(7,2) NOT NULL,
DESCUENTO DECIMAL(7,2) NOT NULL,
EXISTENCIA INT NOT NULL,
CATEGORIA INT, FOREIGN KEY (CATEGORIA) REFERENCES CATEGORIAS(ID_CAT)
);

CREATE TABLE PROVEEDOR
(
ID_PRO INT PRIMARY KEY AUTO_INCREMENT,
NOMBRE NCHAR (40) NOT NULL,
DIRECCION NVARCHAR(50) NOT NULL,
CORREO NCHAR(40) NOT NULL,
TELEFONO NVARCHAR(12) NOT NULL,
CIUDAD NCHAR(20)
);

CREATE TABLE ORDEN_COMPRA
(
ID_COMPRA INT PRIMARY KEY AUTO_INCREMENT,
FECHA DATE NOT NULL,
USUARIO INT NOT NULL, FOREIGN KEY (USUARIO) REFERENCES USUARIO(ID_US),
PROVEEDOR INT, FOREIGN KEY (PROVEEDOR) REFERENCES PROVEEDOR(ID_PRO)
);

CREATE TABLE ORDEN_VENTA
(
ID_VENTA INT PRIMARY KEY AUTO_INCREMENT,
USUARIO INT, FOREIGN KEY (USUARIO) REFERENCES USUARIO(ID_US),
FECHA_VENTA DATE
);

CREATE TABLE DETALLE_ORDEN_VENTA
(
REG_DOV INT PRIMARY KEY AUTO_INCREMENT,
ORDEN_VENTA INT, FOREIGN KEY (ORDEN_VENTA) REFERENCES ORDEN_VENTA(ID_VENTA),
PRODUCTO INT, FOREIGN KEY (PRODUCTO) REFERENCES PRODUCTOS(CVE_P),
CANTIDAD INT
);

CREATE TABLE DETALLE_ORDEN_COMPRA
(
REG_DOC INT PRIMARY KEY AUTO_INCREMENT,
ORDEN_COMPRA INT, FOREIGN KEY (ORDEN_COMPRA) REFERENCES ORDEN_COMPRA(ID_COMPRA),
PRODUCTO INT, FOREIGN KEY (PRODUCTO) REFERENCES PRODUCTOS(CVE_P),
CANTIDAD INT
);

CREATE TABLE INSCRIP_GYM
(
ID_IG INT PRIMARY KEY AUTO_INCREMENT,
TEL_EMERGENCIA NCHAR(12) NOT NULL,
T_PAGO NCHAR(25),
FECHA_INSCRIP date,
USER_FK INT, FOREIGN KEY (USER_FK) REFERENCES USUARIO(ID_US)
);

CREATE TABLE PAGO_MENSUALIDAD
(
ID_PM INT PRIMARY KEY auto_increment,
FECHA_PAGO date,
FECHA_TERMINACION DATE,
USER_INSCRIT INT, FOREIGN KEY (USER_INSCRIT) REFERENCES inscrip_gym(ID_IG)
);
